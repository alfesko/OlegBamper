<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>АвтоЩуП</title>
    <link rel="stylesheet" href="/public/styles.css">
    <link rel="icon" href="/car.ico" type="image/x-icon">
</head>
<body>
<div class="container">
    <h2>Выбор запчастей</h2>
    <form action="/search" method="get">
        <label for="brand">Марка:</label>
        <input type="text" id="brand" name="brand" autocomplete="off" oninput="handleBrandInput(this.value)">
        <div id="brand-autocomplete" class="autocomplete-items"></div>
        <label for="year">Год выпуска:</label>
        <input type="text" id="year" name="year" autocomplete="off" oninput="handleYearInput(this.value)">
        <div id="year-autocomplete" class="autocomplete-items"></div>
        <label for="model">Модель:</label>
        <input type="text" id="model" name="model" required autocomplete="off" oninput="handleModelInput(this.value)">
        <div id="model-autocomplete" class="autocomplete-items"></div>
        <label for="engineVolume">Объем:</label>
        <input type="text" id="engineVolume" name="engineVolume" required>
        <div class="form-row">
            <label for="transmission">Коробка:</label>
            <select id="transmission" name="transmission" required>
                <option value="АКПП">АКПП</option>
                <option value="МКПП">МКПП</option>
                <option value="РОБОТ">Робот</option>
                <option value="ВАРИАТОР">Вариатор</option>
            </select>
            <label for="bodyType">Кузов:</label>
            <select id="bodyType" name="bodyType" required>
                <option value="универсал">Универсал</option>
                <option value="седан">Седан</option>
                <option value="хэтчбек">Хэтчбек</option>
                <option value="внедорожник">Внедорожник</option>
                <option value="минивэн">Минивэн</option>
                <option value="купе">Купе</option>
                <option value="лифтбек">Лифтбек</option>
                <option value="пикап">Пикап</option>
                <option value="кабриолет">Кабриолет</option>
                <option value="фургон">Фургон</option>
                <option value="грузовик">Грузовик</option>
                <option value="бортовой">Бортовой</option>
                <option value="тягач">Тягач</option>
                <option value="автобус">Автобус</option>
                <option value="прицеп">Прицеп</option>
                <option value="полуприцеп">Полуприцеп</option>
                <option value="погрузчик">Погрузчик</option>
            </select>
        </div>
        <label for="article">Артикул объявления:</label>
        <input type="text" id="article" name="article" required>
        <label for="partNumber">Номер запчасти:</label>
        <input type="text" id="partNumber" name="partNumber" required>
        <button type="submit">Поиск</button>
    </form>
</div>

<button id="auth-button" class="auth-btn">Загрузка...</button>

<div class="contact-info">
    <p>Время работы:</p>
    <ul>
        <li>Понедельник - Пятница: 8:00 - 17:00</li>
        <li>Суббота - Воскресенье: 10:00 - 15:00</li>
    </ul>
    <p>Телефоны:</p>
    <ul>
        <li>+375 (33) 638-83-83</li>
        <li>+375 (29) 265-57-52</li>
    </ul>
</div>
<div class="contact-info address-info">
    <p>Адрес:</p>
    <p>Мосты, ул. Вокзальная, д.15, к. 9, оф.2</p>
</div>
<div class="footer">
    <p>© ИП Щука О.Е., УНП 590236855, 22.04.2004, shchuka1971@mail.ru</p>
</div>

<script>
    async function checkAuthStatus() {
        try {
            const response = await fetch('/auth-status');
            const data = await response.json();
            const authButton = document.getElementById('auth-button');
            if (data.loggedIn) {
                authButton.textContent = 'Выйти';
                authButton.onclick = () => location.href = '/logout';
            } else {
                authButton.textContent = 'Войти';
                authButton.onclick = () => location.href = '/login';
            }
        } catch (err) {
            console.error('Ошибка при проверке статуса авторизации:', err);
        }
    }

    document.addEventListener('DOMContentLoaded', checkAuthStatus);

    document.addEventListener('mousemove', (event) => {
        const x = (event.clientX / window.innerWidth - 0.5) * 30;
        const y = (event.clientY / window.innerHeight - 0.5) * 30;
        document.body.style.setProperty('--bg-x', `${x}px`);
        document.body.style.setProperty('--bg-y', `${y}px`);
    });
</script>
</body>
</html>
