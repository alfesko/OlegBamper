<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>АвтоЩуП</title>
    <link rel="stylesheet" href="/public/styles.css">
    <link rel="icon" href="/car.ico" type="image/x-icon">
</head>
<body>
<header class="header">
    <div class="auth-buttons">
        <button id="auth-button" class="auth-btn">Загрузка...</button>
        <button id="add-ad-button" class="add-ad-btn" onclick="redirectToLoginOrAddAd()">
            Добавить объявление
        </button>
    </div>
    <div class="header-content">
        <div class="contact-info">
            <div class="working-hours">
                <p>Время работы:</p>
                <ul>
                    <li>Понедельник - Пятница: 8:00 - 17:00</li>
                    <li>Суббота - Воскресенье: 10:00 - 15:00</li>
                </ul>
            </div>
            <div class="phones">
                <p>Телефоны:</p>
                <ul>
                    <li>+375 (33) 638-83-83</li>
                    <li>+375 (29) 265-57-52</li>
                </ul>
            </div>
        </div>
    </div>
</header>
<h2>Объявления</h2>

<div class="main-content">
    <div class="container">
        <h2>Выбор запчастей</h2>
        <form action="/search" method="get" class="search-form">
            <label for="brand">Марка:</label>
            <input type="text" id="brand" name="brand" autocomplete="off" oninput="handleBrandInput(this.value)">
            <div id="brand-autocomplete" class="autocomplete-items"></div>

            <label for="year">Год выпуска:</label>
            <input type="text" id="year" name="year" autocomplete="off" oninput="handleYearInput(this.value)">
            <div id="year-autocomplete" class="autocomplete-items"></div>

            <label for="model">Модель:</label>
            <input type="text" id="model" name="model" required autocomplete="off" oninput="handleModelInput(this.value)">
            <div id="model-autocomplete" class="autocomplete-items"></div>

            <label for="engineVolume">Объем:</label>
            <input type="text" id="engineVolume" name="engineVolume" required>

            <label for="transmission">Коробка:</label>
            <select id="transmission" name="transmission" required>
                <option value="АКПП">АКПП</option>
                <option value="МКПП">МКПП</option>
                <option value="РОБОТ">Робот</option>
                <option value="ВАРИАТОР">Вариатор</option>
            </select>

            <label for="bodyType">Кузов:</label>
            <select id="bodyType" name="bodyType" required>
                <option value="Седан">Седан</option>
                <option value="Универсал">Универсал</option>
                <option value="хэтчбек">Хэтчбек</option>
                <option value="внедорожник">Внедорожник</option>
                <!-- Дополнительные варианты кузова -->
            </select>

            <label for="article">Артикул объявления:</label>
            <input type="text" id="article" name="article" required>

            <label for="partNumber">Номер запчасти:</label>
            <input type="text" id="partNumber" name="partNumber" required>

            <button type="submit">Поиск</button>
        </form>
    </div>

    <div id="announcements" class="announcements">
        <!-- Объявления будут добавляться динамически через JavaScript -->
    </div>
</div>

<div class="footer">
    <div class="address-info">
        <p>Адрес:</p>
        <p>Мосты, ул. Вокзальная, д.15, к. 9, оф.2</p>
    </div>
    <p>© ИП Щука О.Е., УНП 590236855, 22.04.2004, shchuka1971@mail.ru</p>
</div>

<script>
    window.onload = function() {
        fetch('/api/announcements')
            .then(response => response.json())
            .then(data => {
                const announcementsContainer = document.getElementById('announcements');
                announcementsContainer.innerHTML = '';

                data.forEach(announcement => {
                    const announcementElement = document.createElement('div');
                    announcementElement.classList.add('announcement-item');
                    announcementElement.innerHTML = `
                        <h3>${announcement.brand} - ${announcement.model}</h3>
                        <p>Год: ${announcement.year}</p>
                        <p>Объем: ${announcement.engine_volume}</p>
                        <p>Коробка: ${announcement.transmission}</p>
                        <p>Кузов: ${announcement.body_type}</p>
                        <img src="${announcement.photo}" alt="Фото объявления">
                    `;
                    announcementsContainer.appendChild(announcementElement);
                });
            })
            .catch(error => console.error('Ошибка при загрузке объявлений:', error));
    };
</script>
<script src="/scripts.js"></script>
</body>
</html>
